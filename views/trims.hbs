<h1>Trims</h1>
<div id="Trims">
    <table id="Trims-table">

    {{!-- Header section --}}
    <thead>

        {{!-- For just the first row, we print each key of the row object as a header cell so we
        know what each column means when the page renders --}}
        <tr>
            {{#each data.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}
	    <th>delete</th>
        <th>edit</th>
        </tr>
    </thead>
     {{!-- Body section --}}
    <tbody>

        {{!-- For each row, print the id, fname, lname, homeworld and age, in order --}}
        {{#each data}}
        <tr data-value={{this.trim_ID}}>
            <td>{{this.trim_ID}}</td>
            <td>{{this.trim_Name}}</td>
            <td>{{this.trim_Units}}</td>
            <td>{{this.trim_MSRP}}</td>
            <td>{{this.models_Models}}</td>
            <td>{{this.inventory_ID}}</td>

	          <td><button onclick="deleteTrim({{this.trim_ID}})">Delete</button></td>
            <td><button onclick="updateTrim({{this.trim_ID}})">Edit</button></td>
        </tr>
        {{/each}}
    </tbody>
</table>

<script src="/js/delete_trim.js"></script>

<form id="add-trim-form" method="POST" action="/add-trim-form">
    
    <label for="input-tid">Trim ID: </label>
    <input type="number" name="input-tid" id="input-tid">

    <label for="input-name">Trim Name: </label>
    <input type="text" name="input-name" id="input-name">
    
    <label for="input-units">Trim Units: </label>
    <input type="text" name="input-units" id="input-units">

    <label for="input-msrp">Trim MSRP: </label>
    <input type="text" name="input-msrp" id="input-msrp">

    <label for="input-model">Trim Model: </label>
    <input type="text" name="input-model" id="input-model">
    
    <label for="input-iid">Inventory ID: </label>
    <input type="text" name="input-iid" id="input-iid">

    <input type="submit">
</form>
    <button class="button newTrim" onclick="NewTrimForm()">New Trim</button>
        <button class="button FindTrim" onclick="NewFindTrimForm()">Find Trim</button>
        <!-- <div class="form-popup" id="NewCustomerForm"> -->
            <form id="NewTrimForm" class="form-container" style="display: none;">
              <h1>New Trim</h1>
          
              <label for="trim_ID"><b>Trim ID</b></label>
              <input type="text" placeholder="Enter Trim ID" name="trim_ID" required>
          
              <label for="trim_Name"><b>Trim Name</b></label>
              <input type="text" placeholder="Enter Trim Name" name="trim_Name" required>

              <label for="trim_Units"><b>Trim Units</b></label>
              <input type="text" placeholder="Enter Trim Units" name="trim_Units" required>

              <label for="trim_MSRP"><b>Trim MSRP</b></label>
              <input type="text" placeholder="Enter Trim MSRP" name="trim_MSRP" required>
          
              <button type="submit" class="btn">Enter New Trim</button>
              <button type="button" class="btn cancel" onclick="CloseupdateTrimForm()">Cancel</button>
            </form>

            <form id="EditTrimForm" class="form-container" style="display: none;">
                <h1>New Trim</h1>
            
                <label for="trim_ID"><b>Trim ID</b></label>
                <input type="text" placeholder="Enter Trim ID" name="trim_ID" required>
            
                <label for="trim_Name"><b>Trim Name</b></label>
                <input type="text" placeholder="Enter Trim Name" name="trim_Name" required>
  
                <label for="trim_Units"><b>Trim Units</b></label>
                <input type="text" placeholder="Enter Trim Units" name="trim_Units" required>
  
                <label for="trim_MSRP"><b>Trim MSRP</b></label>
                <input type="text" placeholder="Enter Trim MSRP" name="trim_MSRP" required>
            
                <button type="submit" class="btn">Enter New Trim</button>
                <button type="button" class="btn cancel" onclick="CloseupdateTrimForm()">Cancel</button>
              </form>
          <!-- </div> -->
    <form id="OpenupdateTrim" style="display: none;">
            <h3>Edit Trim</h3>
                <label id="trim_id"><b>Trim ID</b></label>
                <input id="trim_tid" readonly="readonly"/>

                <label for="trim_Name"><b>Trim Name</b></label>
                <input type="text" id="trim_Name">
            
                <label for="trim_Units"><b>Trim Units</b></label>
                <input type="text" id="trim_Units">

                <label for="trim_MSRP"><b>MSRP</b></label>
                <input type="text" id="trim_MSRP">
            
                <label for="input-model"><b>Model ID</b></label>
                <input type="text" id="trim-model">

                <label for="input-iid"><b>Inventory ID</b></label>
                <input type="text" id="trim-iid">
            
                <button type="submit" class="btn">Update Trim</button>
                <button type="button" class="btn cancel" onclick="CloseupdateEmployee()">Cancel</button>
            </form>
      <script>
function updateTrim(trimID) {
    findRow(trimID);
    document.getElementById("OpenupdateTrim").style.display = "block";
}

function CloseupdateEmployee() {
    document.getElementById("OpenupdateTrim").style.display = "none";
}
function findRow(trimID){
    
    let table = document.getElementById("Trims-table");

    for (let i = 0, row; row = table.rows[i]; i++) {
       //iterate through rows
       //rows would be accessed using the "row" variable assigned in the for loop
       if (table.rows[i].getAttribute("data-value") == trimID) {
            
            // Get the location of the row where we found the matching person ID
            let updateRowIndex = table.getElementsByTagName("tr")[i];
            let tempname = updateRowIndex.cells[1];
            let tempunits = updateRowIndex.cells[2];
            let tempmsrp = updateRowIndex.cells[3];
            let tempmodel = updateRowIndex.cells[4];
            let tempiid = updateRowIndex.cells[5];


            document.getElementById("trim_tid").value = trimID;
            document.getElementById("trim_Name").value = tempname.innerText;
            document.getElementById("trim_Units").value = tempunits.innerText;
            document.getElementById("trim_MSRP").value = tempmsrp.innerText;
            document.getElementById("trim-model").value = tempmodel.innerText;
            document.getElementById("trim-iid").value = tempiid.innerText;
       }
    }
}

</script>         
   

<script src="/js/update_trim.js"></script>